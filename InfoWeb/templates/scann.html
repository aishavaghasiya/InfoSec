{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfoSec</title>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <script defer src="{% static 'script.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">InfoSec</div>
        <ul class="nav-links">
            <li><a href="/">Home</a></li>
            <li><a href="/services">Services</a></li>
            <li><a href="/about">About Us</a></li>
            <li><a href="/contact">Contact Us</a></li>
        </ul>
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="container">

        <!-- aleart box for ip Validation-->
        {% if valid_ip %}
        <div class="alert-box" id="alertBox">
            <div class="alert-content">
                <strong>ERROR !! {{ valid_ip }}</strong>
            </div>
            <button class="close-icon" id="closeBtn">✖</button>
        </div>
        {% endif %}
        
        <h2 class="scan-title">Search open ports by scanning IP</h2>
        <h class="scan-title2">Secure your digital assets with our expert <a href="/services">InfoSec services<a></h>
    
    <!-- IP Input Form -->
    <div class="box1">
        <form id="scanForm" method="POST" action="{% url 'scann' %}">
            {% csrf_token %}
            <div class="input-group">
                <select name="scanType" id="scanType" class="dropdown">
                    <option value="quick">Quick Scan</option>
                    <option value="detailed">Detailed Scan</option>
                    <option value="ports">All Ports Scan</option>
                    <option value="vuln">Vulnerability Scan</option>
                    <option value="os">OS Detection</option>
                    <option value="nse">NSE Script Scan</option>
                </select>
                <input class="in-form" type="text" id="ipAddress" name="ipAddress" placeholder="Enter IP Address" required>
            </div>
    
            <p class="example-text"><strong>Example:</strong> IP Address 192.168.1.1</p>
    
            <button type="submit" id="scan-button" class="search-btn">Start Scan</button>
        </form>
    
    </div>

        <!-- Loading Animation -->
        <div id="loading" class="loader-d">
            <div class="loader"></div>
        </div>

        <!-- Display Scan Results -->
        {% if scan_results %}
            <h3 class="result-title">Scan Results</h3>

            {% if scanType == "os" %}
                <h4 class="os-title">Detected OS:</h4>
                <div class="result-box">
                    {% for result in scan_results %}
                        {% if result.os %}
                        <div class="os-box">
                            <p>{{ result.os }}</p>
                        </div>
                        {% else %}
                            <p class="error-msg"> {{ result.error }}</p>
                        {% endif %}
                    {% endfor %}
                </div>

            {% elif scanType == "nse" %}
                <h4 class="os-title">NSE Script Results:</h4>
                <div class="result-box1">
                    <table>
                        <thead>
                            <tr>
                                <th>Script Name</th>
                                <th>Output</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in scan_results %}
                                {% if result.error %}
                                    <tr><td colspan="2" class="error-msg">{{ result.error }}</td></tr>
                                {% else %}
                                    <tr>
                                        <td>{{ result.script }}</td>
                                        <td>{{ result.output }}</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

            {% else %}
                <h4 class="os-title"> Open Ports & Services:</h4>
                <div class="result-box">
                    <table>
                        <thead>
                            <tr>
                                <th>Port</th>
                                <th>Protocol</th>
                                <th>State</th>
                                <th>Service</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for result in scan_results %}
                                {% if result.error %}
                                    <tr><td colspan="4" class="error-msg">{{ result.error }}</td></tr>
                                {% else %}
                                    <tr>
                                        <td>{{ result.port }}</td>
                                        <td>{{ result.protocol }}</td>
                                        <td>{{ result.state }}</td>
                                        <td>{{ result.service }}</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% endif %}
        {% endif %}
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <!-- Left Section: Logo & Address -->
            <div class="footer-left">
                <h2 class="footer-logo">InfoSec</h2>
                <p class="address">123 Cyber Security <br>Ahmedabad, Gujrat 380001<br>INDIA</p>
            </div>
    
            <!-- Middle Section: Solutions -->
            <div class="footer-middle">
                <h3 class="options">Options</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="services">Services</a></li>
                    <li><a href="about">About Us</a></li>
                    <li><a href="contact">Contact Us</a></li>
                </ul>
            </div>
    
            <!-- Middle Right: Contact & Join Us -->
            <div class="footer-contact">
                <a href="contact" class="footer-button">Contact Us</a>
                <a href="https://www.linkedin.com/in/radhen-delvadiya-018886233/" class="footer-button">Join Us</a>
            </div>
    
            <!-- Right Section: Social Media Icons -->
            <div id="social-icons" class="footer-right"></div>
        </div>
    
        <!-- Bottom Copyright Section -->
        <div class="footer-bottom">
            <p>© 2024 InfoSec. All Rights Reserved. | <a href="services">Privacy Policy</a></p>
        </div>
    </footer>
</body>
</html>
